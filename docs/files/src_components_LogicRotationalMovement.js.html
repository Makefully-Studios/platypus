<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../assets/css/yui-cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico">
    <script src="../assets/js/yui-source.js"></script>
	<title>platypus v0.11.11 API Documentation : src\components\LogicRotationalMovement.js</title>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><a href="https://github.com/PBS-KIDS/Platypus"><img src="..\assets\platypus-title.png" title="platypus"></a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Documentation for: 0.11.11</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/platypus.AABB.html">platypus.AABB</a></li>
                                <li><a href="../classes/platypus.ActionState.html">platypus.ActionState</a></li>
                                <li><a href="../classes/platypus.Async.html">platypus.Async</a></li>
                                <li><a href="../classes/platypus.CollisionData.html">platypus.CollisionData</a></li>
                                <li><a href="../classes/platypus.CollisionDataContainer.html">platypus.CollisionDataContainer</a></li>
                                <li><a href="../classes/platypus.CollisionShape.html">platypus.CollisionShape</a></li>
                                <li><a href="../classes/platypus.Component.html">platypus.Component</a></li>
                                <li><a href="../classes/platypus.components.AIChaser.html">platypus.components.AIChaser</a></li>
                                <li><a href="../classes/platypus.components.AIPacer.html">platypus.components.AIPacer</a></li>
                                <li><a href="../classes/platypus.components.AudioSFX.html">platypus.components.AudioSFX</a></li>
                                <li><a href="../classes/platypus.components.AudioVO.html">platypus.components.AudioVO</a></li>
                                <li><a href="../classes/platypus.components.Camera.html">platypus.components.Camera</a></li>
                                <li><a href="../classes/platypus.components.CameraFollowMe.html">platypus.components.CameraFollowMe</a></li>
                                <li><a href="../classes/platypus.components.CollisionBasic.html">platypus.components.CollisionBasic</a></li>
                                <li><a href="../classes/platypus.components.CollisionFilter.html">platypus.components.CollisionFilter</a></li>
                                <li><a href="../classes/platypus.components.CollisionGroup.html">platypus.components.CollisionGroup</a></li>
                                <li><a href="../classes/platypus.components.CollisionTiles.html">platypus.components.CollisionTiles</a></li>
                                <li><a href="../classes/platypus.components.ComponentSwitcher.html">platypus.components.ComponentSwitcher</a></li>
                                <li><a href="../classes/platypus.components.Counter.html">platypus.components.Counter</a></li>
                                <li><a href="../classes/platypus.components.EntityContainer.html">platypus.components.EntityContainer</a></li>
                                <li><a href="../classes/platypus.components.EntityController.html">platypus.components.EntityController</a></li>
                                <li><a href="../classes/platypus.components.EventRender.html">platypus.components.EventRender</a></li>
                                <li><a href="../classes/platypus.components.HandlerCollision.html">platypus.components.HandlerCollision</a></li>
                                <li><a href="../classes/platypus.components.HandlerController.html">platypus.components.HandlerController</a></li>
                                <li><a href="../classes/platypus.components.HandlerLogic.html">platypus.components.HandlerLogic</a></li>
                                <li><a href="../classes/platypus.components.HandlerRender.html">platypus.components.HandlerRender</a></li>
                                <li><a href="../classes/platypus.components.Interactive.html">platypus.components.Interactive</a></li>
                                <li><a href="../classes/platypus.components.LevelBuilder.html">platypus.components.LevelBuilder</a></li>
                                <li><a href="../classes/platypus.components.LogicAngularMovement.html">platypus.components.LogicAngularMovement</a></li>
                                <li><a href="../classes/platypus.components.LogicAttachment.html">platypus.components.LogicAttachment</a></li>
                                <li><a href="../classes/platypus.components.LogicButton.html">platypus.components.LogicButton</a></li>
                                <li><a href="../classes/platypus.components.LogicCarrier.html">platypus.components.LogicCarrier</a></li>
                                <li><a href="../classes/platypus.components.LogicDestroyMe.html">platypus.components.LogicDestroyMe</a></li>
                                <li><a href="../classes/platypus.components.LogicDirectionalMovement.html">platypus.components.LogicDirectionalMovement</a></li>
                                <li><a href="../classes/platypus.components.LogicPortable.html">platypus.components.LogicPortable</a></li>
                                <li><a href="../classes/platypus.components.LogicRotationalMovement.html">platypus.components.LogicRotationalMovement</a></li>
                                <li><a href="../classes/platypus.components.LogicWindUpRacer.html">platypus.components.LogicWindUpRacer</a></li>
                                <li><a href="../classes/platypus.components.Motion.html">platypus.components.Motion</a></li>
                                <li><a href="../classes/platypus.components.Mover.html">platypus.components.Mover</a></li>
                                <li><a href="../classes/platypus.components.NodeMap.html">platypus.components.NodeMap</a></li>
                                <li><a href="../classes/platypus.components.NodeResident.html">platypus.components.NodeResident</a></li>
                                <li><a href="../classes/platypus.components.Orientation.html">platypus.components.Orientation</a></li>
                                <li><a href="../classes/platypus.components.RandomEvents.html">platypus.components.RandomEvents</a></li>
                                <li><a href="../classes/platypus.components.RelayFamily.html">platypus.components.RelayFamily</a></li>
                                <li><a href="../classes/platypus.components.RelayGame.html">platypus.components.RelayGame</a></li>
                                <li><a href="../classes/platypus.components.RelayLinker.html">platypus.components.RelayLinker</a></li>
                                <li><a href="../classes/platypus.components.RelayParent.html">platypus.components.RelayParent</a></li>
                                <li><a href="../classes/platypus.components.RelaySelf.html">platypus.components.RelaySelf</a></li>
                                <li><a href="../classes/platypus.components.RenderAnimation.html">platypus.components.RenderAnimation</a></li>
                                <li><a href="../classes/platypus.components.RenderContainer.html">platypus.components.RenderContainer</a></li>
                                <li><a href="../classes/platypus.components.RenderDebug.html">platypus.components.RenderDebug</a></li>
                                <li><a href="../classes/platypus.components.RenderDestroyMe.html">platypus.components.RenderDestroyMe</a></li>
                                <li><a href="../classes/platypus.components.RenderProgress.html">platypus.components.RenderProgress</a></li>
                                <li><a href="../classes/platypus.components.RenderSpine.html">platypus.components.RenderSpine</a></li>
                                <li><a href="../classes/platypus.components.RenderSprite.html">platypus.components.RenderSprite</a></li>
                                <li><a href="../classes/platypus.components.RenderText.html">platypus.components.RenderText</a></li>
                                <li><a href="../classes/platypus.components.RenderTiles.html">platypus.components.RenderTiles</a></li>
                                <li><a href="../classes/platypus.components.SceneChanger.html">platypus.components.SceneChanger</a></li>
                                <li><a href="../classes/platypus.components.StateRender.html">platypus.components.StateRender</a></li>
                                <li><a href="../classes/platypus.components.TiledLoader.html">platypus.components.TiledLoader</a></li>
                                <li><a href="../classes/platypus.components.Timeline.html">platypus.components.Timeline</a></li>
                                <li><a href="../classes/platypus.components.Tutorial.html">platypus.components.Tutorial</a></li>
                                <li><a href="../classes/platypus.components.VoiceOver.html">platypus.components.VoiceOver</a></li>
                                <li><a href="../classes/platypus.components.XHR.html">platypus.components.XHR</a></li>
                                <li><a href="../classes/platypus.Data.html">platypus.Data</a></li>
                                <li><a href="../classes/platypus.DataMap.html">platypus.DataMap</a></li>
                                <li><a href="../classes/platypus.Entity.html">platypus.Entity</a></li>
                                <li><a href="../classes/platypus.Game.html">platypus.Game</a></li>
                                <li><a href="../classes/platypus.Messenger.html">platypus.Messenger</a></li>
                                <li><a href="../classes/platypus.PIXIAnimation.html">platypus.PIXIAnimation</a></li>
                                <li><a href="../classes/platypus.PlatypusPlugin.html">platypus.PlatypusPlugin</a></li>
                                <li><a href="../classes/platypus.Scene.html">platypus.Scene</a></li>
                                <li><a href="../classes/platypus.StateMap.html">platypus.StateMap</a></li>
                                <li><a href="../classes/platypus.Vector.html">platypus.Vector</a></li>
                                <li><a href="../classes/window.Array.html">window.Array</a></li>
                                <li><a href="../classes/window.Map.html">window.Map</a></li>
                                <li><a href="../classes/window.String.html">window.String</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/platypus.html">platypus</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
            <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <script>
                        	var name = src\components\LogicRotationalMovement.js      
                        </script>
                        <h1 class="file-heading">File:src\components\LogicRotationalMovement.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        /**
                         * This component changes the (x, y) position of an object according to its current speed and heading. It maintains its own heading information independent of other components allowing it to be used simultaneously with other logic components like [[Logic-Pushable]]. It accepts directional messages that can stand alone, or come from a mapped controller, in which case it checks the &#x60;pressed&#x60; value of the message before changing its course accordingly.
                         *
                         * @namespace platypus.components
                         * @class LogicRotationalMovement
                         * @uses platypus.Component
                         */
                        /* global platypus */
                        (function () {
                            &#x27;use strict&#x27;;
                        
                            var cos = Math.cos,
                                sin = Math.sin,
                                polarToCartesianX = function (m, a) {
                                    return m * cos(a);
                                },
                                polarToCartesianY = function (m, a) {
                                    return m * sin(a);
                                };
                            
                            return platypus.createComponentClass({
                                id: &#x27;LogicRotationalMovement&#x27;,
                        
                                properties: {
                                    /**
                                     * Defines the distance in world units that the entity should be moved per millisecond.
                                     *
                                     * @property speed
                                     * @type Number
                                     * @default 0.3
                                     */
                                    &quot;speed&quot;: 0.3,
                                    
                                    /**
                                     * Radian orientation that entity should begin in. Defaults to 0 (facing right).
                                     *
                                     * @property angle
                                     * @type Number
                                     * @default 0
                                     */
                                    &quot;angle&quot;: 0,
                                    
                                    /**
                                     * Unit in radians that the angle should change per millisecond.
                                     *
                                     * @property degree
                                     * @type Number
                                     * @default 1
                                     */
                                    &quot;degree&quot;: 1
                                },
                        
                                initialize: function () {
                                    var state = this.owner.state;
                                    
                                    this.magnitude = 0;
                                    
                                    this.state = state;
                                    state.set(&#x27;moving&#x27;, false);
                                    state.set(&#x27;turningRight&#x27;, false);
                                    state.set(&#x27;turningLeft&#x27;, false);
                            
                                    this.owner.orientation  = 0;
                                    
                                    this.moving = false;
                                    this.turningRight = false;
                                    this.turningLeft = false;
                                },
                                events: {
                                    /**
                                     * On receiving this event, the component updates its location according to its current state.
                                     *
                                     * @method &#x27;handle-logic&#x27;
                                     * @param tick.delta {Number} To determine how far to move the entity, the component checks the length of the tick.
                                     */
                                    &quot;handle-logic&quot;: function (tick) {
                                        var state = this.state;
                                        
                                        if (this.turningRight) {
                                            this.angle += this.degree * tick.delta / 15;
                                        }
                                
                                        if (this.turningLeft) {
                                            this.angle -= this.degree * tick.delta / 15;
                                        }
                                        
                                        if (this.moving) {
                                            this.owner.x += (polarToCartesianX(this.magnitude, this.angle) * tick.delta);
                                            this.owner.y += (polarToCartesianY(this.magnitude, this.angle) * tick.delta);
                                        }
                                        
                                        state.set(&#x27;moving&#x27;, this.moving);
                                        state.set(&#x27;turningLeft&#x27;, this.turningLeft);
                                        state.set(&#x27;turningRight&#x27;, this.turningRight);
                                        
                                        if (this.owner.orientation !== this.angle) {
                                            this.owner.orientation = this.angle * Math.PI / 180;
                                            this.owner.triggerEvent(&#x27;orientation-updated&#x27;);
                                        }
                                    },
                        
                                    /**
                                     * This rotates the entity by a delta in radians.
                                     *
                                     * @method &#x27;rotate&#x27;
                                     * @param angleDelta {Number} The change in angle.
                                     */
                                    &quot;rotate&quot;: function (angleDelta) {
                                        this.angle += angleDelta;
                                    },
                        
                                    /**
                                     * On receiving this event, the entity turns right.
                                     *
                                     * @method &#x27;turn-right&#x27;
                                     * @param [state.pressed] {boolean} If &#x60;state&#x60; is included, the component checks the value of &#x60;pressed&#x60;: true causes movement in the triggered direction, false turns off movement in that direction. Note that if no message is included, the only way to stop movement in a particular direction is to trigger &#x60;stop&#x60; on the entity before progressing in a new orientation.
                                     */
                                    &quot;turn-right&quot;: function (state) {
                                        if (state) {
                                            this.turningRight = state.pressed;
                                        } else {
                                            this.turningRight = true;
                                        }
                                    },
                        
                                    /**
                                     * On receiving this event, the entity turns left.
                                     *
                                     * @method &#x27;turn-left&#x27;
                                     * @param [state.pressed] {boolean} If &#x60;state&#x60; is included, the component checks the value of &#x60;pressed&#x60;: true causes movement in the triggered direction, false turns off movement in that direction. Note that if no message is included, the only way to stop movement in a particular direction is to trigger &#x60;stop&#x60; on the entity before progressing in a new orientation.
                                     */
                                    &quot;turn-left&quot;: function (state) {
                                        if (state) {
                                            this.turningLeft = state.pressed;
                                        } else {
                                            this.turningLeft = true;
                                        }
                                    },
                        
                                    /**
                                     * On receiving this event, the entity goes forward.
                                     *
                                     * @method &#x27;go-forward&#x27;
                                     * @param [state.pressed] {boolean} If &#x60;state&#x60; is included, the component checks the value of &#x60;pressed&#x60;: true causes movement in the triggered direction, false turns off movement in that direction. Note that if no message is included, the only way to stop movement in a particular direction is to trigger &#x60;stop&#x60; on the entity before progressing in a new orientation.
                                     */
                                    &quot;go-forward&quot;: function (state) {
                                        if (!state || state.pressed) {
                                            this.moving = true;
                                            this.magnitude = this.speed;
                                        } else {
                                            this.moving = false;
                                        }
                                    },
                        
                                    /**
                                     * On receiving this event, the entity goes backward.
                                     *
                                     * @method &#x27;go-backward&#x27;
                                     * @param [state.pressed] {boolean} If &#x60;state&#x60; is included, the component checks the value of &#x60;pressed&#x60;: true causes movement in the triggered direction, false turns off movement in that direction. Note that if no message is included, the only way to stop movement in a particular direction is to trigger &#x60;stop&#x60; on the entity before progressing in a new orientation.
                                     */
                                    &quot;go-backward&quot;: function (state) {
                                        if (!state || state.pressed) {
                                            this.moving = true;
                                            this.magnitude = -this.speed;
                                        } else {
                                            this.moving = false;
                                        }
                                    },
                        
                                    /**
                                     * Stops rotational and linear motion until movement messages are again received.
                                     *
                                     * @method &#x27;stop&#x27;
                                     * @param [state.pressed] {Boolean} If &#x60;state&#x60; is included, the component checks the value of &#x60;pressed&#x60;: a value of false will not stop the entity.
                                     */
                                    &quot;stop&quot;: function (state) {
                                        if (!state || state.pressed) {
                                            this.moving = false;
                                            this.turningLeft = false;
                                            this.turningRight = false;
                                        }
                                    },
                        
                                    /**
                                     * Stops linear motion until movement messages are again received.
                                     *
                                     * @method &#x27;stop-moving&#x27;
                                     * @param [state.pressed] {Boolean} If &#x60;state&#x60; is included, the component checks the value of &#x60;pressed&#x60;: a value of false will not stop the entity.
                                     */
                                    &quot;stop-moving&quot;: function (state) {
                                        if (!state || state.pressed) {
                                            this.moving = false;
                                        }
                                    },
                        
                                    /**
                                     * Stops rotational motion until movement messages are again received.
                                     *
                                     * @method &#x27;stop-turning&#x27;
                                     * @param [state.pressed] {Boolean} If &#x60;state&#x60; is included, the component checks the value of &#x60;pressed&#x60;: a value of false will not stop the entity.
                                     */
                                    &quot;stop-turning&quot;: function (state) {
                                        if (!state || state.pressed) {
                                            this.turningLeft = false;
                                            this.turningRight = false;
                                        }
                                    }
                                },
                                
                                methods: {
                                    destroy: function () {
                                        this.state = null;
                                    }
                                }
                            });
                        }());
                        
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
